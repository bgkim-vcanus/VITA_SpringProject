<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="me.vita.mapper.ReplyMapper">
	
	
	
	
	<insert id="insert" parameterType="me.vita.domain.ReplyVO">	
		<!-- 테스트  
		insert into REPLY	 (REPLYNO, FEEDNO, REPLYCONTENT, REPLYDATE, USERID)
		values (seq_replyno.nextval, 1, '댓글내용', SYSDATE, '이승현')
		-->
		insert into reply (replyno, feedno, replycontent, replydate, userid)
		values (seq_replyno.nextval, #{feedno}, #{replycontent}, SYSDATE, #{userid})
	</insert> 

	<delete id="delete">
		delete from reply where replyno = #{replyno}
	</delete>
	
	<select id="selectList" resultType="me.vita.dto.ReplyDTO">
	select replyno, feedNo, replycontent, replydate , userid
   	  from reply 
     where feedNo = #{feedNo} order by replyno desc
	
	</select> 
 
	<select id="selectCount" resultType="Integer">
		select count(*) 
	      from feed f
	      left outer join reply r
	                   on f.feedno = r.feedno
	      left outer join userinfo u 
	                   on f.userid = u.userid
	     where f.feedno = #{feedNo}        
	</select>

</mapper> 